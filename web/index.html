<!DOCTYPE html>
<html lang="en" dir="ltr">
<head>
  <meta charset="UTF-8">
  <link rel="stylesheet" href="css/homeStyles.css">
  <link rel="stylesheet" href="css/searchStyles.css">
  <link rel="stylesheet" href="css/graphBuilder.css">
  <script src="https://code.highcharts.com/highcharts.js"></script>

  <script src="https://code.highcharts.com/highcharts-more.js"></script>
  <script src="https://code.highcharts.com/modules/bullet.js"></script>
  <script async
          src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDy0KK1RmrRu9ywyGn6qCCrdKhLGreZ0kY&libraries=visualization&callback=initMap">
  </script>
  <script src="https://developers.google.com/maps/documentation/javascript/examples/markerclusterer/markerclusterer.js"></script>


  <meta name="viewport" content="width=device-width, initial-scale=1.0">

</head>
<body>
<section class="home-section">
  <div class="home-content">
    <i class='bx bx-menu' style="display: none;"></i>
    <span class="text" id="title-text">REF2021 - Nation</span>
    <select id="institution-dropdown" class="inst-dropdown">
      <option value="Nation" selected>Nation</option>
      <!-- Additional institution options -->
    </select>
    <select id="unit-of-assessment-dropdown" class="uoa-dropdown">

    </select>
    <button id="create-graph-button" class="create-graph-btn">Create Graph</button>
    <button id="back-button" class="create-graph-btn" style="display: none;">Back</button>

  </div>


  <!-- home page html -->
    <div class="main-container" id="homepage-section">
      <div class="left-components">
      <div class="component-bubble">
        <div class="bubble-content" id="records-container"></div>
      </div>
      <div class="component-bubble">
        <div class="bubble-content" id="bullet-graph-container"></div>
      </div>
      <div class="component-bubble">
        <div class="bubble-content" id="top-FTE-records"></div>
      </div>
      <div class="component-bubble">
        <div class="bubble-content" id="outputs-records"></div>

      </div>
      <div class="component-bubble">
        <div class="bubble-content">
        <h3 class="top10vsnext10-title">Top 10 vs Next 10</h3>
        <select id="10v10Option" class="10v10-dropdown">
          <option value="Overall">Average Overall GPA</option>
          <option value="Outputs">Average Outputs GPA</option>
          <option value="Impact">Average Impact GPA</option>
          <option value="Environment">Average Environment GPA</option>
          <option value="FTEOfSubmittedStaff">Total FTE of Submitted Staff</option>
          <option value="Doctoral" selected >Total Doctoral Degrees</option>
          <option value="TotalIncome1320">Total Income</option>
          <option value="AverageIncome1320">Average Income</option>
        </select>
        <div class="toptwenty-content" id="10v10container"></div>
        </div>
      </div>
      <div  class="component-bubble">
        <div class="bubble-content" id="top-sources-container"></div>
      </div>
    </div>
    <div class="right-homepage-container">
      <div class="title-container">
      <h3 class="heatmap-title" id="heatmap-title">Heatmap of the UK</h3>
      <select class="profile-dropdown" id="profile-dropdown">
        <option value="Overall" default>Overall</option>
        <option value="Outputs">Outputs</option>
        <option value="Impact">Impact</option>
        <option value="Environment">Environment</option>
      </select>
        </div>
      <div class="heatmap-container" id="heatmap-container"></div>
    </div>
  </div>


<!-- inst search html -->

<div class="main-container" id="institution-section" style="display: none;">
  <div class="left-components">
    <div class="component-bubble">
      <div class="bubble-content" id="bullet-chart-container"></div>
    </div>
    <div class="component-bubble">
      <div class="bubble-content" id="search-results"></div>
    </div>
    <div class="component-bubble">
      <div class="bubble-content" id="income-chart-dist"></div>
    </div>
    <div class="component-bubble">
      <div class="bubble-content" id="income-container"></div>
    </div>
    <div class ="component-bubble">
      <div class="bubble-content" id="doctoral-degrees-container"></div>
    </div>


  </div>
  <div class="right-homepage-container">
    <div class="component-bubble" id="fte-income-container"></div>
    <div class="component-bubble" id="income-outputs"></div>
  </div>
</div>

  <!-- Graph builder html -->
  <div class="main-container" id="graph-section" style="display: none;">
    <div class="component-bubble top-bubble" id="graph-container">
      <div id="error-message" class="hidden" style="color: red; display: none;">
      </div>
    </div>
    <div class="bottom-bubble">
      <form id="dataForm" class="bottom-bubble">
        <div id="graphStep1" class="bottom-bubble component-bubble">
          <div class="step-label">Step 1:</div>
          <div class="dropdown-container">
            <i class="text">UoA:</i>
              <select id="UofA">
                  <option value="" disabled selected>Select your option</option>
                  <option value="Agriculture, Food and Veterinary Sciences">Agriculture, Food and Veterinary Sciences</option>
                  <option value="Allied Health Professions, Dentistry, Nursing and Pharmacy">Allied Health Professions, Dentistry, Nursing and Pharmacy</option>
                  <option value="Anthropology and Development Studies">Anthropology and Development Studies</option>
                  <option value="Archaeology">Archaeology</option>
                  <option value="Architecture, Built Environment and Planning">Architecture, Built Environment and Planning</option>
                  <option value="Area Studies">Area Studies</option>
                  <option value="Art and Design: History, Practice and Theory">Art and Design: History, Practice and Theory</option>
                  <option value="Biological Sciences">Biological Sciences</option>
                  <option value="Business and Management Studies">Business and Management Studies</option>
                  <option value="Chemistry">Chemistry</option>
                  <option value="Classics">Classics</option>
                  <option value="Clinical Medicine">Clinical Medicine</option>
                  <option value="Communication, Cultural and Media Studies, Library and Information Management">Communication, Cultural and Media Studies, Library and Information Management</option>
                  <option value="Computer Science and Informatics">Computer Science and Informatics</option>
                  <option value="Earth Systems and Environmental Sciences">Earth Systems and Environmental Sciences</option>
                  <option value="Economics and Econometrics">Economics and Econometrics</option>
                  <option value="Education">Education</option>
                  <option value="Engineering">Engineering</option>
                  <option value="English Language and Literature">English Language and Literature</option>
                  <option value="Geography and Environmental Studies">Geography and Environmental Studies</option>
                  <option value="History">History</option>
                  <option value="Law">Law</option>
                  <option value="Mathematical Sciences">Mathematical Sciences</option>
                  <option value="Modern Languages and Linguistics">Modern Languages and Linguistics</option>
                  <option value="Music, Drama, Dance, Performing Arts, Film and Screen Studies">Music, Drama, Dance, Performing Arts, Film and Screen Studies</option>
                  <option value="Philosophy">Philosophy</option>
                  <option value="Physics">Physics</option>
                  <option value="Politics and International Studies">Politics and International Studies</option>
                  <option value="Psychology, Psychiatry and Neuroscience">Psychology, Psychiatry and Neuroscience</option>
                  <option value="Public Health, Health Services and Primary Care">Public Health, Health Services and Primary Care</option>
                  <option value="Social Work and Social Policy">Social Work and Social Policy</option>
                  <option value="Sociology">Sociology</option>
                  <option value="Sport and Exercise Sciences, Leisure and Tourism">Sport and Exercise Sciences, Leisure and Tourism</option>
                  <option value="Theology and Religious Studies">Theology and Religious Studies</option>
              </select>
          </div>
        </div>
        <div id="graphStep2" style="display:none;" class="bottom-bubble component-bubble">
          <div class="step-label">Step 2: X axis</div>
          <div class="radio-buttons-container">
            <input type="radio" id="profileX" name="specialOptionGroupX" value="profile" onchange="updateBubbleProfIncX()">
            <label for="profileX">Profile</label>

            <input type="radio" id="incomeX" name="specialOptionGroupX" value="income" onchange="updateBubbleProfIncX()">
            <label for="incomeX">Income</label>
          </div>
          <div class="axis-container">
            <span id="xAxisLabel" style="display:none;"></span> <!-- This text will change based on JS -->
            <select id="xAxis" style="display:none;" onchange="updateProfileOptions('xProfOptions','xAxis')">
            </select>
          </div>
          <div class="prof-options-container">
            <select id="xProfOptions" style="display: none;">
              <option value="" disabled selected>Profile Options</option>
              <option value="AverageScore">AverageScore</option>
              <option value="FTEOfSubmittedStaff">FTEOfSubmittedStaff</option>
              <option value="PercEligibleStaff">PercEligibleStaff</option>
              <option value="FourStar">FourStar</option>
              <option value="ThreeStar">ThreeStar</option>
              <option value="TwoStar">TwoStar</option>
              <option value="OneStar">OneStar1</option>
              <option value="Unclassified">Unclassified</option>
            </select>
          </div>
        </div>
        <div id="graphStep3" style="display: none;" class="bottom-bubble component-bubble">
          <div class="step-label">Step 3: Y axis</div>
          <div class="radio-buttons-container">

            <input type="radio" id="profileY" name="specialOptionGroupY" value="profile" onchange="updateBubbleProfIncY()">
            <label for="profileY">Profile</label>

            <input type="radio" id="incomeY" name="specialOptionGroupY" value="income" onchange="updateBubbleProfIncY()">
            <label for="incomeY">Income</label>
          </div>
          <div class="axis-container">
            <span id="yAxisLabel">Profile</span> <!-- This text will change based on JS -->
            <select id="yAxis" onchange="updateProfileOptions('yProfOptions','yAxis')">
            </select>
          </div>
          <div class="prof-options-container">
            <select id="yProfOptions" style="display: none;">
              <option value="" disabled selected>Profile Options</option>
              <option value="AverageScore">AverageScore</option>
              <option value="FTEOfSubmittedStaff">FTEOfSubmittedStaff</option>
              <option value="PercEligibleStaff">PercEligibleStaff</option>
              <option value="FourStar">FourStar</option>
              <option value="ThreeStar">ThreeStar</option>
              <option value="TwoStar">TwoStar</option>
              <option value="OneStar">OneStar1</option>
              <option value="Unclassified">Unclassified</option>
            </select>
          </div>
        </div>
        <div id="graphStep4" style="display:none;" class="bottom-bubble component-bubble">
          <div class="input-group">
            <div class="checkbox-group">
              <label for="highlightRussellGroup">Highlight Russell Group:</label>
              <input type="checkbox" id="highlightRussellGroup" name="highlightRussellGroup">
            </div>
            <label for="uniToHighlight">Highlight Specific Uni:</label>
            <input type="text" id="uniToHighlight" name="uniToHighlight" placeholder="Enter Name" value="">
            <div id="highlightSuggestionsContainer" style="display:none;"></div>
          </div>
          <input type="submit" value="Create Graph" id="submitParams">
        </div>
      </form>
    </div>
  </div>
</section>

<script>
  let arrow = document.querySelectorAll(".arrow");
  for (var i = 0; i < arrow.length; i++) {
    arrow[i].addEventListener("click", (e)=>{
   let arrowParent = e.target.parentElement.parentElement;//selecting main parent of arrow
   arrowParent.classList.toggle("showMenu");
    });
  }
  let sidebar1 = document.querySelector(".sidebar");
  let sidebarBtn = document.querySelector(".bx-menu");
  console.log(sidebarBtn);
  sidebarBtn.addEventListener("click", ()=>{
    sidebar1.classList.toggle("close");
  });
</script>
<script>
  // Select the Institution Search link
  let instSearchLink = document.querySelector('.iocn-link a');

  // Select the sidebar
  let sidebar2 = document.querySelector('.sidebar');

  // Add event listener for click event on the Institution Search link
  instSearchLink.addEventListener('click', (event) => {
      // Open the sidebar by removing the "close" class
      sidebar2.classList.remove('close');
      console.log('clicked');
      // Allow default behavior to navigate to the specified HTML page
      // Note: If the href attribute contains "#" you might need to prevent default behavior and manually navigate to the desired page using JavaScript
      // For example:
      // event.preventDefault();
      // window.location.href = instSearchLink.getAttribute('href');
  });

</script>

<!-- home page bubble scripts -->
<script src="homeScripts/topbottom3.js"></script>
<script src="homeScripts/outputs.js"></script>
<script src="homeScripts/nationalAverage.js"></script>
<script src="homeScripts/totalIncome.js"></script>
<script src="homeScripts/Top3fte.js"></script>
<script src="homeScripts/top10vsnext10.js"></script>
<script src="homeScripts/universities_coordinates.json"></script>

<!-- inst search bubble scripts -->
<script src="instSearchScripts/basicScores.js"></script>
<script src="instSearchScripts/title.js"></script>
<script src="instSearchScripts/incomeChart.js"></script>
<script src="instSearchScripts/fundingDist.js"></script>
<script src="instSearchScripts/doctoralDegreeGraph.js"></script>
<script src="instSearchScripts/fteToincome.js"></script>
<script src="instSearchScripts/uniRank.js"></script>
<script src="instSearchScripts/incomeOutputs.js"></script>

<!-- graph builder scripts -->
<script src="graphBuilderScripts/graphButtonHandler.js"></script>
<script src="graphBuilderScripts/graphGen.js"></script>
<script src="homeScripts/enterSearch.js"></script>
<script src="graphBuilderScripts/fileHandler.js"></script>
<script src="graphBuilderScripts/bubbleVisibility.js"></script>

<!-- Handlers for the dropdowns -->
<script src="homeScripts/enterSearch.js"></script>
<script src="homeScripts/dropdownHomeHandler.js"></script>
<script src="homeScripts/uniDropdown.js"></script>
<script src="homeScripts/uoADropdown.js"></script>
<script src="instSearchScripts/insDropdownHandler.js"></script>

<script src="homeScripts/heatmap.js" defer></script>
</body>
</html>
