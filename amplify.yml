version: 1
backend:
  phases:
    preBuild:
      commands:
        - echo "Install pip"
        - python -m ensurepip --default-pip
        - python -m pip install --upgrade pip
        - echo "Install pipenv"
        - python -m pip install pipenv
    build:
      commands:
        - echo "Install dependencies with pipenv"
        - python3 --version  # Check the current Python version
        - pipenv --python 3.9
        - pipenv install
        - amplify update function top3 --runtime python3.8
        - amplifyPush --simple
frontend:
  phases:
    build:
      commands: []
  artifacts:
    # IMPORTANT - Please verify your build output directory
    baseDirectory: web
    files:
      - '**/*'
  cache:
    paths: []
